/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css               *//* empty css                 *//* empty css                *//* empty css                     */import{r as c}from"./request-d9b764dc.js";import{a as F,o as f,c as _,h as g,d as o,w as a,i as P,B as J,C as M,D as O,G as T,H as $,I as m,F as A,e as G,f as q,J as H,E as u,K,N as Q,L as R,P as j,Q as W,R as X,M as Y}from"./index-3f6e6985.js";const Z={class:"card",style:{"margin-bottom":"5px"}},ee={class:"card",style:{"margin-bottom":"5px"}},oe={style:{"margin-bottom":"10px"}},le={key:0,class:"card"},te={class:"dialog-footer"},be={__name:"Goods",setup(ae){const b="http://:9090/files/upload",e=F({pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],name:null,categoryList:[]});c.get("/category/selectAll").then(r=>{e.categoryList=r.data});const i=()=>{c.get("/goods/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(r=>{var t,s;e.tableData=(t=r.data)==null?void 0:t.list,e.total=(s=r.data)==null?void 0:s.total})},V=()=>{e.form={discount:1},e.formVisible=!0},y=r=>{e.form=JSON.parse(JSON.stringify(r)),e.formVisible=!0},k=()=>{c.post("/goods/add",e.form).then(r=>{r.code==="200"?(i(),u.success("操作成功"),e.formVisible=!1):u.error(r.msg)})},x=()=>{c.put("/goods/update",e.form).then(r=>{r.code==="200"?(i(),u.success("操作成功"),e.formVisible=!1):u.error(r.msg)})},E=()=>{console.log(e.form),e.form.id?x():k()},v=r=>{H.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(t=>{c.delete("/goods/delete/"+r).then(s=>{s.code==="200"?(i(),u.success("操作成功")):u.error(s.msg)})}).catch(t=>{})},w=()=>{e.name=null,i()},U=r=>{e.form.img=r.data};return i(),(r,t)=>{const s=J,p=M,n=K,C=Q,N=O,S=T,d=R,z=j,B=W,D=X,h=Y,I=$;return f(),_("div",null,[g("div",Z,[o(s,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.name=l),style:{width:"300px","margin-right":"10px"},placeholder:"请输入名称查询"},null,8,["modelValue"]),o(p,{type:"primary",onClick:i},{default:a(()=>[m("查询")]),_:1}),o(p,{type:"info",style:{margin:"0 10px"},onClick:w},{default:a(()=>[m("重置")]),_:1})]),g("div",ee,[g("div",oe,[o(p,{type:"primary",onClick:V},{default:a(()=>[m("新增")]),_:1})]),o(N,{data:e.tableData,stripe:""},{default:a(()=>[o(n,{label:"名称",prop:"name"}),o(n,{label:"图片",prop:"img"},{default:a(l=>[o(C,{style:{"border-radius":"5%","max-width":"50px"},src:l.row.img,"preview-src-list":[l.row.img],"preview-teleported":!0},null,8,["src","preview-src-list"])]),_:1}),o(n,{label:"简介",prop:"descr"}),o(n,{label:"特色",prop:"specials"}),o(n,{label:"单价",prop:"price"}),o(n,{label:"折扣",prop:"discount"}),o(n,{label:"单位",prop:"unit"}),o(n,{label:"库存",prop:"stock"}),o(n,{label:"分类",prop:"category_name"}),o(n,{label:"操作","header-align":"center",width:"160"},{default:a(l=>[o(p,{type:"primary",onClick:L=>y(l.row)},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"]),o(p,{type:"danger",onClick:L=>v(l.row.id)},{default:a(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(f(),_("div",le,[o(S,{background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":t[1]||(t[1]=l=>e.pageSize=l),"current-page":e.pageNum,"onUpdate:currentPage":t[2]||(t[2]=l=>e.pageNum=l),total:e.total},null,8,["page-size","current-page","total"])])):P("",!0),o(I,{title:"书籍信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":t[12]||(t[12]=l=>e.formVisible=l),"close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[g("span",te,[o(p,{onClick:t[11]||(t[11]=l=>e.formVisible=!1)},{default:a(()=>[m("取 消")]),_:1}),o(p,{type:"primary",onClick:E},{default:a(()=>[m("保 存")]),_:1})])]),default:a(()=>[o(h,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:a(()=>[o(d,{label:"名称",prop:"name"},{default:a(()=>[o(s,{modelValue:e.form.name,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"图片",prop:"img"},{default:a(()=>[o(z,{action:b,"list-type":"picture","on-success":U},{default:a(()=>[o(p,{size:"small",type:"primary"},{default:a(()=>[m("点击上传")]),_:1})]),_:1})]),_:1}),o(d,{label:"简介",prop:"descr"},{default:a(()=>[o(s,{modelValue:e.form.descr,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.descr=l),autocomplete:"off",type:"textarea"},null,8,["modelValue"])]),_:1}),o(d,{label:"特色",prop:"specials"},{default:a(()=>[o(s,{modelValue:e.form.specials,"onUpdate:modelValue":t[5]||(t[5]=l=>e.form.specials=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"单价",prop:"price"},{default:a(()=>[o(s,{modelValue:e.form.price,"onUpdate:modelValue":t[6]||(t[6]=l=>e.form.price=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"折扣",prop:"discount"},{default:a(()=>[o(s,{modelValue:e.form.discount,"onUpdate:modelValue":t[7]||(t[7]=l=>e.form.discount=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"单位",prop:"unit"},{default:a(()=>[o(s,{modelValue:e.form.unit,"onUpdate:modelValue":t[8]||(t[8]=l=>e.form.unit=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"库存",prop:"stock"},{default:a(()=>[o(s,{modelValue:e.form.stock,"onUpdate:modelValue":t[9]||(t[9]=l=>e.form.stock=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(d,{label:"分类",prop:"category_id"},{default:a(()=>[o(D,{modelValue:e.form.category_id,"onUpdate:modelValue":t[10]||(t[10]=l=>e.form.category_id=l),placeholder:"请选择分类",style:{width:"60%"}},{default:a(()=>[(f(!0),_(A,null,G(e.categoryList,l=>(f(),q(B,{key:l.id,label:l.category,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{be as default};
