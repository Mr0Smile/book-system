/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{r as c}from"./request-d9b764dc.js";import{a as Y,o as f,c as g,h as _,d as o,w as a,i as B,B as M,C as H,D as L,G as P,H as T,I as m,F,e as O,f as J,J as $,E as i,K as A,Q as G,R as q,L as K,S as Q,T as R,M as j}from"./index-3f6e6985.js";const W={class:"card",style:{"margin-bottom":"5px"}},X={class:"card",style:{"margin-bottom":"5px"}},Z={style:{"margin-bottom":"10px"}},ee={key:0,class:"card"},oe={class:"dialog-footer"},ce={__name:"GoodsIn",setup(te){const e=Y({pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],goods_name:null,goodsList:[]});c.get("/goods/selectAll").then(n=>{e.goodsList=n.data});const r=()=>{c.get("/goodsIn/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,goods_name:e.goods_name}}).then(n=>{var t,s;e.tableData=(t=n.data)==null?void 0:t.list,e.total=(s=n.data)==null?void 0:s.total})},b=()=>{e.form={num:1,date:new Date().toISOString().replace(/T/," ").replace(/\..+/,"")},e.formVisible=!0},V=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},y=()=>{c.post("/goodsIn/add",e.form).then(n=>{n.code==="200"?(r(),i.success("操作成功"),e.formVisible=!1):i.error(n.msg)})},k=()=>{c.put("/goodsIn/update",e.form).then(n=>{n.code==="200"?(r(),i.success("操作成功"),e.formVisible=!1):i.error(n.msg)})},E=()=>{e.form.id?k():y()},h=n=>{$.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(t=>{c.delete("/goodsIn/delete/"+n).then(s=>{s.code==="200"?(r(),i.success("操作成功")):i.error(s.msg)})}).catch(t=>{})},x=()=>{e.goods_name=null,r()};return r(),(n,t)=>{const s=M,d=H,p=A,v=L,C=P,N=G,D=q,u=K,S=Q,w=R,I=j,U=T;return f(),g("div",null,[_("div",W,[o(s,{modelValue:e.goods_name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.goods_name=l),style:{width:"300px","margin-right":"10px"},placeholder:"请输入书本名称查询"},null,8,["modelValue"]),o(d,{type:"primary",onClick:r},{default:a(()=>[m("查询")]),_:1}),o(d,{type:"info",style:{margin:"0 10px"},onClick:x},{default:a(()=>[m("重置")]),_:1})]),_("div",X,[_("div",Z,[o(d,{type:"primary",onClick:b},{default:a(()=>[m("新增")]),_:1})]),o(v,{data:e.tableData,stripe:""},{default:a(()=>[o(p,{label:"书籍名称",prop:"goods_name"}),o(p,{label:"进货数量",prop:"num"}),o(p,{label:"进货渠道",prop:"channel"}),o(p,{label:"进货日期",prop:"date"}),o(p,{label:"备注",prop:"comment"}),o(p,{label:"操作","header-align":"center",width:"160"},{default:a(l=>[o(d,{type:"primary",onClick:z=>V(l.row)},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"]),o(d,{type:"danger",onClick:z=>h(l.row.id)},{default:a(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(f(),g("div",ee,[o(C,{background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":t[1]||(t[1]=l=>e.pageSize=l),"current-page":e.pageNum,"onUpdate:currentPage":t[2]||(t[2]=l=>e.pageNum=l),total:e.total},null,8,["page-size","current-page","total"])])):B("",!0),o(U,{title:"进货信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":t[9]||(t[9]=l=>e.formVisible=l),"close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[_("span",oe,[o(d,{onClick:t[8]||(t[8]=l=>e.formVisible=!1)},{default:a(()=>[m("取 消")]),_:1}),o(d,{type:"primary",onClick:E},{default:a(()=>[m("保 存")]),_:1})])]),default:a(()=>[o(I,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:a(()=>[o(u,{label:"书籍名称",prop:"name"},{default:a(()=>[o(D,{modelValue:e.form.goods_id,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.goods_id=l),placeholder:"请选择书籍",style:{width:"60%"}},{default:a(()=>[(f(!0),g(F,null,O(e.goodsList,l=>(f(),J(N,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"进货数量",prop:"num"},{default:a(()=>[o(S,{min:1,modelValue:e.form.num,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.num=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(u,{label:"进货渠道",prop:"channel"},{default:a(()=>[o(s,{modelValue:e.form.channel,"onUpdate:modelValue":t[5]||(t[5]=l=>e.form.channel=l),autocomplete:"off",placeholder:"请输入进货渠道"},null,8,["modelValue"])]),_:1}),o(u,{label:"进货日期",prop:"date"},{default:a(()=>[o(w,{modelValue:e.form.date,"onUpdate:modelValue":t[6]||(t[6]=l=>e.form.date=l),placeholder:"请选择日期",type:"datetime",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),o(u,{label:"备注",prop:"comment"},{default:a(()=>[o(s,{modelValue:e.form.comment,"onUpdate:modelValue":t[7]||(t[7]=l=>e.form.comment=l),autocomplete:"off",type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{ce as default};
