/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css              *//* empty css                 *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css                     */import{r as c}from"./request-d9b764dc.js";import{a as P,o as g,c as b,h as f,d as e,w as t,B as J,C as T,D as $,G as A,H as F,I as s,i as G,J as O,E as u,K as R,N as q,P as H,L as K,U as L,V as j,M as Q}from"./index-3f6e6985.js";const W={class:"card",style:{"margin-bottom":"5px"}},X={class:"card",style:{"margin-bottom":"5px"}},Y={style:{"margin-bottom":"10px"}},Z={key:0},ee={class:"card"},oe={class:"dialog-footer"},ge={__name:"User",setup(le){const V="http://:9090/files/upload",o=P({pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],name:null}),i=()=>{c.get("/user/selectPage",{params:{pageNum:o.pageNum,pageSize:o.pageSize,name:o.name}}).then(r=>{var l,n;o.tableData=(l=r.data)==null?void 0:l.list,o.total=(n=r.data)==null?void 0:n.total})},y=()=>{o.form={},o.formVisible=!0},x=r=>{o.form=JSON.parse(JSON.stringify(r)),o.formVisible=!0},E=()=>{c.post("/user/add",o.form).then(r=>{r.code==="200"?(i(),u.success("操作成功"),o.formVisible=!1):u.error(r.msg)})},w=()=>{c.put("/user/update",o.form).then(r=>{r.code==="200"?(i(),u.success("操作成功"),o.formVisible=!1):u.error(r.msg)})},k=()=>{o.form.id?w():E()},v=r=>{O.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(l=>{c.delete("/user/delete/"+r).then(n=>{n.code==="200"?(i(),u.success("操作成功")):u.error(n.msg)})}).catch(l=>{})},U=()=>{o.name=null,i()},C=r=>{o.form.avatar=r.data};return i(),(r,l)=>{const n=J,p=T,m=R,N=q,h=$,S=A,z=H,d=K,_=L,D=j,B=Q,I=F;return g(),b("div",null,[f("div",W,[e(n,{modelValue:o.name,"onUpdate:modelValue":l[0]||(l[0]=a=>o.name=a),style:{width:"300px","margin-right":"10px"},placeholder:"请输入名称查询"},null,8,["modelValue"]),e(p,{type:"primary",onClick:i},{default:t(()=>[s("查询")]),_:1}),e(p,{type:"info",style:{margin:"0 10px"},onClick:U},{default:t(()=>[s("重置")]),_:1})]),f("div",X,[f("div",Y,[e(p,{type:"primary",onClick:y},{default:t(()=>[s("新增")]),_:1})]),e(h,{data:o.tableData,stripe:""},{default:t(()=>[e(m,{label:"账号",prop:"username"}),e(m,{label:"名称",prop:"name"}),e(m,{label:"密码",prop:"password"}),e(m,{label:"性别",prop:"sex"}),e(m,{label:"电话",prop:"phone"}),e(m,{label:"邮箱",prop:"email"}),e(m,{label:"创建时间",prop:"create_time"}),e(m,{label:"头像"},{default:t(a=>[e(N,{src:a.row.avatar,style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,["src"])]),_:1}),e(m,{label:"角色",prop:"role"},{default:t(a=>[a.row.role==="ADMIN"?(g(),b("span",Z,"管理员")):G("",!0)]),_:1}),e(m,{label:"操作",align:"center",width:"160"},{default:t(a=>[e(p,{type:"primary",onClick:M=>x(a.row)},{default:t(()=>[s("编辑")]),_:2},1032,["onClick"]),e(p,{type:"danger",onClick:M=>v(a.row.id)},{default:t(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),f("div",ee,[e(S,{background:"",layout:"prev, pager, next","page-size":o.pageSize,"onUpdate:pageSize":l[1]||(l[1]=a=>o.pageSize=a),"current-page":o.pageNum,"onUpdate:currentPage":l[2]||(l[2]=a=>o.pageNum=a),total:o.total},null,8,["page-size","current-page","total"])]),e(I,{title:"信息",width:"40%",modelValue:o.formVisible,"onUpdate:modelValue":l[10]||(l[10]=a=>o.formVisible=a),"close-on-click-modal":!1,"destroy-on-close":""},{footer:t(()=>[f("span",oe,[e(p,{onClick:l[9]||(l[9]=a=>o.formVisible=!1)},{default:t(()=>[s("取 消")]),_:1}),e(p,{type:"primary",onClick:k},{default:t(()=>[s("保 存")]),_:1})])]),default:t(()=>[e(B,{model:o.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:t(()=>[e(d,{label:"头像",prop:"avatar"},{default:t(()=>[e(z,{action:V,"list-type":"picture","on-success":C},{default:t(()=>[e(p,{type:"primary"},{default:t(()=>[s("上传图片")]),_:1})]),_:1})]),_:1}),e(d,{label:"账号",prop:"username"},{default:t(()=>[e(n,{modelValue:o.form.username,"onUpdate:modelValue":l[3]||(l[3]=a=>o.form.username=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(d,{label:"名称",prop:"name"},{default:t(()=>[e(n,{modelValue:o.form.name,"onUpdate:modelValue":l[4]||(l[4]=a=>o.form.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(d,{label:"密码",prop:"password"},{default:t(()=>[e(n,{modelValue:o.form.password,"onUpdate:modelValue":l[5]||(l[5]=a=>o.form.password=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(d,{label:"性别",prop:"sex"},{default:t(()=>[e(D,{modelValue:o.form.sex,"onUpdate:modelValue":l[6]||(l[6]=a=>o.form.sex=a)},{default:t(()=>[e(_,{label:"男"},{default:t(()=>[s("男")]),_:1}),e(_,{label:"女"},{default:t(()=>[s("女")]),_:1}),e(_,{label:"女"},{default:t(()=>[s("不愿透露")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"电话",prop:"phone"},{default:t(()=>[e(n,{modelValue:o.form.phone,"onUpdate:modelValue":l[7]||(l[7]=a=>o.form.phone=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(d,{label:"邮箱",prop:"email"},{default:t(()=>[e(n,{modelValue:o.form.email,"onUpdate:modelValue":l[8]||(l[8]=a=>o.form.email=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{ge as default};
